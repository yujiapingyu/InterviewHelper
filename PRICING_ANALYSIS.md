# AI额度定价分析

## Gemini 2.0 Flash Lite 成本分析

### API定价（2024年11月数据）
- **Input**: $0.075 per 1M tokens
- **Output**: $0.30 per 1M tokens
- **免费配额**: 每天1500次请求，每分钟15次

### 预估每次操作的Token消耗

#### 1. 生成问题 (GENERATE_QUESTIONS)
- **Input**: ~2000 tokens (履历书信息 + 现有问题摘要)
- **Output**: ~800 tokens (3个问题，每个包含日文+中文+答案+技巧)
- **成本**: (2000 × $0.075 + 800 × $0.30) / 1,000,000 = **$0.00039**
- **额度点数**: 5点

#### 2. 评估答案 (EVALUATE_ANSWER)
- **Input**: ~1500 tokens (问题 + 用户回答)
- **Output**: ~600 tokens (评分 + 反馈 + 改进建议)
- **成本**: (1500 × $0.075 + 600 × $0.30) / 1,000,000 = **$0.00029**
- **额度点数**: 3点

#### 3. 生成追问 (FOLLOW_UP_QUESTION)
- **Input**: ~1200 tokens (原问题 + 对话历史)
- **Output**: ~400 tokens (追问 + 推理)
- **成本**: (1200 × $0.075 + 400 × $0.30) / 1,000,000 = **$0.00021**
- **额度点数**: 3点

#### 4. 评估追问答案 (FOLLOW_UP_EVALUATION)
- **Input**: ~1000 tokens (追问 + 答案)
- **Output**: ~500 tokens (评估反馈)
- **成本**: (1000 × $0.075 + 500 × $0.30) / 1,000,000 = **$0.00023**
- **额度点数**: 3点

#### 5. 分析单词 (ANALYZE_VOCABULARY)
- **Input**: ~300 tokens (单词)
- **Output**: ~400 tokens (翻译 + 解释 + 例句)
- **成本**: (300 × $0.075 + 400 × $0.30) / 1,000,000 = **$0.00014**
- **额度点数**: 2点

#### 6. 导入文档 (IMPORT_DOCUMENT)
- **Input**: ~5000 tokens (文档内容)
- **Output**: ~1500 tokens (提取的问题列表)
- **成本**: (5000 × $0.075 + 1500 × $0.30) / 1,000,000 = **$0.00083**
- **额度点数**: 8点

#### 7. 解析问题 (ANALYZE_QUESTION)
- **Input**: ~800 tokens (问题 + 类别)
- **Output**: ~1000 tokens (完整答案 + 技巧 + 摘要)
- **成本**: (800 × $0.075 + 1000 × $0.30) / 1,000,000 = **$0.00036**
- **额度点数**: 5点

#### 8. 解析履历书 (PARSE_RESUME)
- **Input**: ~3000 tokens (履历书文本)
- **Output**: ~1500 tokens (技能 + 经验 + 教育背景)
- **成本**: (3000 × $0.075 + 1500 × $0.30) / 1,000,000 = **$0.00068**
- **额度点数**: 10点

---

## 总成本计算

### 每100点额度的实际成本
- 平均成本/操作：约 $0.0004
- 100点额度可执行：约25-30次综合操作
- **实际成本**: 约 **$0.01 - 0.012 USD**

### 充值方案建议

#### 方案A：低倍率（用户友好）
| 充值金额 | 获得额度 | 每点成本 | 利润率 |
|---------|---------|---------|--------|
| ¥1 (RMB) | 100点 | ¥0.01 | ~600% |
| ¥5 | 600点 | ¥0.0083 | ~700% |
| ¥10 | 1500点 | ¥0.0067 | ~850% |
| ¥50 | 10000点 | ¥0.005 | ~1000% |

**特点**：
- 用户感觉实惠（1元=100点）
- 实际利润率很高（600-1000%）
- 推荐用于个人项目或小规模服务

#### 方案B：中倍率（平衡型）
| 充值金额 | 获得额度 | 每点成本 | 利润率 |
|---------|---------|---------|--------|
| ¥1 (RMB) | 50点 | ¥0.02 | ~300% |
| ¥5 | 300点 | ¥0.0167 | ~350% |
| ¥10 | 800点 | ¥0.0125 | ~450% |
| ¥50 | 5000点 | ¥0.01 | ~600% |

**特点**：
- 更可持续的定价
- 仍有合理利润空间
- 适合商业化运营

#### 方案C：保守型（低风险）
| 充值金额 | 获得额度 | 每点成本 | 利润率 |
|---------|---------|---------|--------|
| ¥1 (RMB) | 20点 | ¥0.05 | ~100% |
| ¥5 | 120点 | ¥0.042 | ~150% |
| ¥10 | 300点 | ¥0.033 | ~200% |
| ¥50 | 2000点 | ¥0.025 | ~300% |

**特点**：
- 非常保守的定价
- 考虑服务器、运维等其他成本
- 适合企业级应用

---

## 推荐定价：方案A（修正版）

考虑到Gemini 2.0 Flash Lite极低的成本，推荐以下定价：

```javascript
// 服务器端定价配置
export const PRICING = {
  // 人民币充值档位
  packages: [
    { 
      amount_cny: 1, 
      credits: 100, 
      bonus: 0,
      popular: false 
    },
    { 
      amount_cny: 5, 
      credits: 500, 
      bonus: 100,  // 赠送20%
      popular: false 
    },
    { 
      amount_cny: 10, 
      credits: 1000, 
      bonus: 300,  // 赠送30%
      popular: true 
    },
    { 
      amount_cny: 30, 
      credits: 3000, 
      bonus: 1200, // 赠送40%
      popular: false 
    },
    { 
      amount_cny: 50, 
      credits: 5000, 
      bonus: 2500, // 赠送50%
      popular: false 
    },
  ],
  
  // 实际成本标记（透明化）
  actual_cost_per_100_credits: 0.012, // $0.012 USD
  exchange_rate: 7.2, // 1 USD = 7.2 RMB (动态更新)
};
```

### 用户体验示例：
- 新用户注册：**免费100点**（体验所有功能）
- ¥1充值：100点（约可用25次操作）
- ¥10充值：1300点（约可用325次操作）+ 热门推荐
- ¥50充值：7500点（约可用1875次操作）+ 最划算

### 典型用户场景成本分析：

#### 场景1：面试准备（1周）
- 上传履历书：10点
- 生成10个问题：50点
- 练习5个问题（含追问）：3×5×3=45点
- 分析10个单词：20点
- **总计**：125点 ≈ ¥1.25

#### 场景2：深度准备（1个月）
- 上传履历书：10点
- 生成30个问题：150点
- 导入公司问题文档：8点
- 练习20个问题：3×20×3=180点
- 分析50个单词：100点
- 解析5个问题：25点
- **总计**：473点 ≈ ¥4-5

#### 场景3：长期使用（3个月）
- 综合使用：约1500点
- **成本**：¥10档位（1300点+赠送）完全够用

---

## 成本保护策略

### 1. 免费额度限制
```javascript
// 新用户初始额度
const INITIAL_CREDITS = 100;

// 每日免费额度恢复（可选）
const DAILY_FREE_CREDITS = 0; // 暂不启用

// 额度告警阈值
const LOW_CREDITS_WARNING = 20;
```

### 2. 速率限制
```javascript
// 防止滥用
const RATE_LIMITS = {
  GENERATE_QUESTIONS: { max: 10, window: '1h' },
  EVALUATE_ANSWER: { max: 20, window: '1h' },
  ANALYZE_VOCABULARY: { max: 30, window: '1h' },
  IMPORT_DOCUMENT: { max: 5, window: '1d' },
  PARSE_RESUME: { max: 5, window: '1d' },
};
```

### 3. 异常检测
- 监控异常高频调用
- 检测重复请求（防刷）
- API失败不扣费

---

## 结论

**推荐实施方案A**，理由：
1. ✅ **用户心理**: ¥1=100点，直观易懂
2. ✅ **实际利润**: 600-1000%利润率，完全覆盖成本+运维
3. ✅ **竞争力**: 比市场类似服务（如ChatGPT Plus $20/月）便宜很多
4. ✅ **可持续性**: 即使免费用户多，边际成本极低
5. ✅ **灵活性**: 后期可通过促销、会员制等方式调整

**风险极低**：
- Gemini 2.0 Flash Lite有每日免费配额
- 即使用户用完免费额度，实际成本也很低
- 利润率足够覆盖服务器、CDN、数据库等运维成本
